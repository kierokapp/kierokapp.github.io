webpackJsonp([1],{476:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(490),o=r(510),a=r(0),n=a(s.a,o.a,!1,null,null,null);t.default=n.exports},490:function(e,t,r){"use strict";var s=r(7),o=r.n(s),a=r(82),n=r.n(a),c=r(6),i=r(15),u=r(32),l=r(52),h=r(508);t.a={props:["cityName","resourceName","categoryName"],data:function(){return{loading:!1}},computed:{resource:function(){var e=this;return n()(i.a.resources).find(function(t){return i.a.resources[t].plural===e.resourceName})},category:{get:function(){return this.$store.state.products.category||{}},set:function(e){(null===e||e&&e.name)&&this.$store.commit("setCategory",e,{module:"products"})}},results:{get:function(){return this.$store.state.search.results[this.resource]},set:function(e){this.$store.commit("setResults",{resource:this.resource,data:e},{module:"search"})}}},methods:{next:function(e){this.$router.push({name:this.$route.name,params:o()({},this.$route.params,{categoryName:e.slug})})},onSelected:function(e,t){!0!==t&&this.next(e)},onCategoryLoaded:function(e){this.categoryName&&!e&&this.next({})},onSearchSubmitted:function(){this.next(this.category||{}),this.loading=!0},onSearchDone:function(e){this.loading=!1}},components:{ProductList:u.default,CategorySelector:l.default,SearchFilterList:h.a},created:function(){this.$store.commit("setSearchType","productos",{module:"search"}),this.categoryName||(this.category=null),this.$root.$on("search:submitted",this.onSearchSubmitted).$on("search:done",this.onSearchDone)},beforeDestroy:function(){this.$root.$off("search:submitted",this.onSearchSubmitted).$off("search:done",this.onSearchDone)},beforeRouteEnter:function(e,t,r){var s=void 0,o=void 0;s=i.a.cities.some(function(t){return t.slug===e.params.cityName}),o=Object(c.c)(e.params.resourceName),s&&o?r():r("/")},beforeRouteUpdate:function(e,t,r){var s=!0,o=!0;e.params.cityName!==t.params.cityName&&(s=i.a.cities.some(function(t){return t.slug===e.params.cityName})),e.params.resourceName!==t.params.resourceName&&(o=Object(c.c)(e.params.resourceName)),s&&o?r():r(!1)}}},491:function(e,t,r){"use strict";var s=r(51),o=r.n(s);t.a={name:"search-filter-list",methods:{removeFilter:function(e){var t=this;this.$store.commit("removeFilter",e,{module:"search"}),this.$store.dispatch("applyFiltersToURL",this.$router).then(function(){t.$root.$emit("search:filter-closed",e)})}},created:function(){for(var e in this.$store.state.search.filters)console.log("at",e,o()(this.$route.query),this.$route.query[e]),this.$route.query[e]||(console.log("removing",e),this.removeFilter(e)),console.log("bye",e,o()(this.$route.query),this.$route.query[e])}}},508:function(e,t,r){"use strict";var s=r(491),o=r(509),a=r(0),n=a(s.a,o.a,!1,null,null,null);t.a=n.exports},509:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row group"},e._l(e.$store.state.search.filters,function(t){return r("q-chip",{key:t.name,staticClass:"on-left lowercase",attrs:{color:e.$store.getters.appColor,closable:"",small:""},on:{close:function(r){e.removeFilter(t.name)}}},[e._v("\n      "+e._s(t.presenter)+"\n  ")])}))},o=[],a={render:s,staticRenderFns:o};t.a=a},510:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"non-selectable"},[e.categoryName?r("div",[r("search-filter-list"),e._v(" "),e.loading?[e._v("\n      Cargando...\n    ")]:!e.loading&&e.results.length?[r("product-list",{attrs:{items:e.results}})]:[r("h1",[e._v("Una loca página para búsquedas vacías se asoma...")])]],2):[r("category-selector",{ref:"selector",attrs:{mode:"list",resource:e.resource,value:e.category,"loaded-callback":e.onCategoryLoaded},on:{selected:e.onSelected}})]],2)},o=[],a={render:s,staticRenderFns:o};t.a=a}});